{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import Footer from'../components/footer/Footer';import SettingsForm from'../components/settings/SettingsForm';import{updateSettings,resetSettings}from'../../redux/settings/actions';import{fetchPatients}from'../../redux/patients/actions';import className from'../../utils/class-names';import'./BaseLayout.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var patientsUrl='http://localhost:9000/patients';var BaseLayout=function BaseLayout(_ref){var nav=_ref.nav,topNav=_ref.topNav,sideNav=_ref.sideNav,orientation=_ref.orientation,children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showSettings=_useState2[0],setShowSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),scrolled=_useState4[0],setScrolled=_useState4[1];var dispatch=useDispatch();var sidebarOpened=useSelector(function(state){return state.settings.sidebarOpened;});var settings=useSelector(function(state){return state.settings;});var pageData=useSelector(function(state){return state.pageData;});useEffect(function(){dispatch(fetchPatients());},[patientsUrl]);var handleScroll=function handleScroll(event){setScrolled(event.target.scrollTop>0);};var mainContentClasses=className({'main-content':true,loaded:pageData.loaded,fulfilled:pageData.fulFilled});var mainContentWrapClasses=className({'main-content-wrap':true});var onUpdateSettings=function onUpdateSettings(settings){return dispatch(updateSettings(settings));};var toggleSettings=function toggleSettings(){return setShowSettings(!showSettings);};var onResetSettings=function onResetSettings(){return dispatch(resetSettings());};var contentOverlay=/*#__PURE__*/_jsx(\"div\",{className:className({'content-overlay':true,show:sidebarOpened})});return/*#__PURE__*/_jsx(\"div\",{className:\"layout \".concat(orientation),children:/*#__PURE__*/_jsxs(\"div\",{className:\"app-container \".concat(settings.boxed&&'boxed',\" \").concat(scrolled&&'scrolled'),children:[nav,topNav,sideNav,/*#__PURE__*/_jsxs(\"main\",{onScroll:handleScroll,className:mainContentClasses,children:[/*#__PURE__*/_jsx(\"div\",{className:\"app-loader\",children:/*#__PURE__*/_jsx(\"i\",{className:\"icofont-spinner-alt-4 rotate\"})}),/*#__PURE__*/_jsxs(\"div\",{className:mainContentWrapClasses,children:[pageData&&!!pageData.title&&/*#__PURE__*/_jsx(\"header\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:pageData.title})}),children]})]}),/*#__PURE__*/_jsx(Footer,{breadcrumbs:pageData.breadcrumbs,layout:settings.layout,boxed:settings.boxed,loaded:pageData.loaded,openModal:toggleSettings}),contentOverlay,/*#__PURE__*/_jsx(_Modal,{visible:showSettings,onCancel:toggleSettings,footer:null,title:/*#__PURE__*/_jsx(\"h3\",{className:\"m-0\",style:{opacity:0.8},children:\"Settings\"}),children:/*#__PURE__*/_jsx(SettingsForm,{settings:settings,onResetSettings:onResetSettings,onUpdateSetting:onUpdateSettings})})]})});};export default BaseLayout;","map":{"version":3,"sources":["D:/nginx/frontend/src/layout/base/BaseLayout.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Footer","SettingsForm","updateSettings","resetSettings","fetchPatients","className","patientsUrl","BaseLayout","nav","topNav","sideNav","orientation","children","showSettings","setShowSettings","scrolled","setScrolled","dispatch","sidebarOpened","state","settings","pageData","handleScroll","event","target","scrollTop","mainContentClasses","loaded","fulfilled","fulFilled","mainContentWrapClasses","onUpdateSettings","toggleSettings","onResetSettings","contentOverlay","show","boxed","title","breadcrumbs","layout","opacity"],"mappings":"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","sourcesContent":["import React, { ReactNode, useEffect, useState } from 'react';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Modal } from 'antd';\r\n\r\nimport Footer from '../components/footer/Footer';\r\nimport SettingsForm from '../components/settings/SettingsForm';\r\n\r\nimport { updateSettings, resetSettings } from '../../redux/settings/actions';\r\nimport { fetchPatients } from '../../redux/patients/actions';\r\n\r\nimport className from '../../utils/class-names';\r\n\r\nimport { IAppSettings } from '../../interfaces/settings';\r\nimport { IAppState } from '../../interfaces/app-state';\r\nimport { IPageData } from '../../interfaces/page';\r\n\r\nimport './BaseLayout.scss';\r\n\r\nconst patientsUrl = 'http://localhost:9000/patients';\r\n\r\ntype Props = {\r\n  nav: ReactNode;\r\n  sideNav?: ReactNode;\r\n  topNav?: ReactNode;\r\n  children: ReactNode;\r\n  orientation: 'vertical' | 'horizontal';\r\n};\r\n\r\nconst BaseLayout = ({ nav, topNav, sideNav, orientation, children }: Props) => {\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const sidebarOpened = useSelector<IAppState, boolean>((state) => state.settings.sidebarOpened);\r\n  const settings = useSelector<IAppState, IAppSettings>((state) => state.settings);\r\n  const pageData = useSelector<IAppState, IPageData>((state) => state.pageData);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPatients());\r\n  }, [patientsUrl]);\r\n\r\n  const handleScroll = (event) => {\r\n    setScrolled(event.target.scrollTop > 0);\r\n  };\r\n\r\n  const mainContentClasses = className({\r\n    'main-content': true,\r\n    loaded: pageData.loaded,\r\n    fulfilled: pageData.fulFilled\r\n  });\r\n\r\n  const mainContentWrapClasses = className({\r\n    'main-content-wrap': true\r\n  });\r\n\r\n  const onUpdateSettings = (settings) => dispatch(updateSettings(settings));\r\n  const toggleSettings = () => setShowSettings(!showSettings);\r\n  const onResetSettings = () => dispatch(resetSettings());\r\n\r\n  const contentOverlay = (\r\n    <div\r\n      className={className({\r\n        'content-overlay': true,\r\n        show: sidebarOpened\r\n      })}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div className={`layout ${orientation}`}>\r\n      <div className={`app-container ${settings.boxed && 'boxed'} ${scrolled && 'scrolled'}`}>\r\n        {nav}\r\n\r\n        {topNav}\r\n\r\n        {sideNav}\r\n\r\n        <main onScroll={handleScroll} className={mainContentClasses}>\r\n          <div className='app-loader'>\r\n            <i className='icofont-spinner-alt-4 rotate' />\r\n          </div>\r\n\r\n          <div className={mainContentWrapClasses}>\r\n            {pageData && !!pageData.title && (\r\n              <header className='page-header'>\r\n                <h1 className='page-title'>{pageData.title}</h1>\r\n              </header>\r\n            )}\r\n            {children}\r\n          </div>\r\n        </main>\r\n\r\n        <Footer\r\n          breadcrumbs={pageData.breadcrumbs}\r\n          layout={settings.layout}\r\n          boxed={settings.boxed}\r\n          loaded={pageData.loaded}\r\n          openModal={toggleSettings}\r\n        />\r\n        {contentOverlay}\r\n        <Modal\r\n          visible={showSettings}\r\n          onCancel={toggleSettings}\r\n          footer={null}\r\n          title={\r\n            <h3 className='m-0' style={{ opacity: 0.8 }}>\r\n              Settings\r\n            </h3>\r\n          }\r\n        >\r\n          <SettingsForm\r\n            settings={settings}\r\n            onResetSettings={onResetSettings}\r\n            onUpdateSetting={onUpdateSettings}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BaseLayout;\r\n"]},"metadata":{},"sourceType":"module"}