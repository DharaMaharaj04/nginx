{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useFormik}from'formik';import*as Yup from'yup';import ImageLoader from'../../../layout/components/patients/ImageLoader';import{hasErrorFactory}from'../../../utils/hasError';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var defaultSubmitText='Add Appointment';var emptyAppointment={date:'',doctor:'',email:'',fromTo:'',img:'',injury:'',name:'',number:'',from:'',to:''};var appointmentSchema=Yup.object().shape({date:Yup.string().required(),doctor:Yup.string().required(),email:Yup.string().required(),injury:Yup.string().required(),name:Yup.string().required(),number:Yup.string().required(),from:Yup.string().required(),to:Yup.string().required()});var AppointmentForm=function AppointmentForm(_ref){var _ref$submitText=_ref.submitText,submitText=_ref$submitText===void 0?defaultSubmitText:_ref$submitText,_ref$appointment=_ref.appointment,appointment=_ref$appointment===void 0?emptyAppointment:_ref$appointment,_onSubmit=_ref.onSubmit,onCancel=_ref.onCancel;var _useFormik=useFormik({validationSchema:appointmentSchema,initialValues:appointment,onSubmit:function onSubmit(form){_onSubmit(_objectSpread(_objectSpread({},form),{},{fromTo:\"\".concat(form.from,\" - \").concat(form.to),img:img}));resetForm();}}),handleSubmit=_useFormik.handleSubmit,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,values=_useFormik.values,setValues=_useFormik.setValues,isValid=_useFormik.isValid,errors=_useFormik.errors,touched=_useFormik.touched,resetForm=_useFormik.resetForm;var _values$fromTo$split=values.fromTo.split('-'),_values$fromTo$split2=_slicedToArray(_values$fromTo$split,2),from=_values$fromTo$split2[0],to=_values$fromTo$split2[1];var _useState=useState(values.img),_useState2=_slicedToArray(_useState,2),img=_useState2[0],setImg=_useState2[1];useEffect(function(){setValues(_objectSpread(_objectSpread({},values),{},{from:from,to:to}));},[appointment]);var handleImageLoad=function handleImageLoad(image){setImg(image);};var handleCancel=function handleCancel(){resetForm();onCancel();};var hasError=hasErrorFactory(touched,errors);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(ImageLoader,{onLoad:handleImageLoad,src:img})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{name:\"name\",placeholder:\"Name\",onBlur:handleBlur,onChange:handleChange,defaultValue:values.name,className:hasError('name')})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{defaultValue:values.doctor,placeholder:\"Doctor\",onBlur:handleBlur,name:\"doctor\",onChange:handleChange,className:hasError('doctor')})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{defaultValue:values.email,placeholder:\"Email\",name:\"email\",type:\"email\",onBlur:handleBlur,onChange:handleChange,className:hasError('email')})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{defaultValue:values.date,placeholder:\"Date\",name:\"date\",onChange:handleChange,onBlur:handleBlur,className:hasError('date')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{name:\"from\",placeholder:\"From\",defaultValue:from,onChange:handleChange,onBlur:handleBlur,className:hasError('from')})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{name:\"to\",placeholder:\"To\",defaultValue:to,onChange:handleChange,onBlur:handleBlur,className:hasError('to')})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{type:\"phone\",name:\"number\",onBlur:handleBlur,placeholder:\"Number\",onChange:handleChange,defaultValue:values.number,className:hasError('number')})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(_Input,{name:\"injury\",placeholder:\"Injury\",onChange:handleChange,defaultValue:values.injury,onBlur:handleBlur,className:hasError('injury')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between buttons-list settings-actions\",children:[/*#__PURE__*/_jsx(_Button,{danger:true,onClick:handleCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(_Button,{disabled:!isValid,type:\"primary\",htmlType:\"submit\",children:submitText})]})]})});};export default AppointmentForm;","map":{"version":3,"sources":["D:/nginx/frontend/src/pages/dashboards/appointments/AppointmentForm.tsx"],"names":["React","useEffect","useState","useFormik","Yup","ImageLoader","hasErrorFactory","defaultSubmitText","emptyAppointment","date","doctor","email","fromTo","img","injury","name","number","from","to","appointmentSchema","object","shape","string","required","AppointmentForm","submitText","appointment","onSubmit","onCancel","validationSchema","initialValues","form","resetForm","handleSubmit","handleChange","handleBlur","values","setValues","isValid","errors","touched","split","setImg","handleImageLoad","image","handleCancel","hasError"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { Button, Input } from 'antd';\r\n\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nimport ImageLoader from '../../../layout/components/patients/ImageLoader';\r\nimport { hasErrorFactory } from '../../../utils/hasError';\r\n\r\nimport { IAppointment } from '../../../interfaces/patient';\r\n\r\ntype Props = {\r\n  appointment?: IAppointment;\r\n  onSubmit: (appointment: IAppointment) => void;\r\n  onCancel: () => void;\r\n  submitText?: string;\r\n};\r\n\r\nconst defaultSubmitText = 'Add Appointment';\r\nconst emptyAppointment = {\r\n  date: '',\r\n  doctor: '',\r\n  email: '',\r\n  fromTo: '',\r\n  img: '',\r\n  injury: '',\r\n  name: '',\r\n  number: '',\r\n  from: '',\r\n  to: ''\r\n};\r\n\r\nconst appointmentSchema = Yup.object().shape({\r\n  date: Yup.string().required(),\r\n  doctor: Yup.string().required(),\r\n  email: Yup.string().required(),\r\n  injury: Yup.string().required(),\r\n  name: Yup.string().required(),\r\n  number: Yup.string().required(),\r\n  from: Yup.string().required(),\r\n  to: Yup.string().required()\r\n});\r\n\r\nconst AppointmentForm = ({\r\n  submitText = defaultSubmitText,\r\n  appointment = emptyAppointment,\r\n  onSubmit,\r\n  onCancel\r\n}: Props) => {\r\n  const {\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    setValues,\r\n    isValid,\r\n    errors,\r\n    touched,\r\n    resetForm\r\n  } = useFormik<IAppointment>({\r\n    validationSchema: appointmentSchema,\r\n    initialValues: appointment,\r\n    onSubmit: (form) => {\r\n      onSubmit({ ...form, fromTo: `${form.from} - ${form.to}`, img });\r\n      resetForm();\r\n    }\r\n  });\r\n  const [from, to] = values.fromTo.split('-');\r\n  const [img, setImg] = useState(values.img);\r\n\r\n  useEffect(() => {\r\n    setValues({ ...values, from, to });\r\n  }, [appointment]);\r\n\r\n  const handleImageLoad = (image) => {\r\n    setImg(image);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    resetForm();\r\n    onCancel();\r\n  };\r\n\r\n  const hasError = hasErrorFactory(touched, errors);\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className='form-group'>\r\n          <ImageLoader onLoad={handleImageLoad} src={img} />\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            name='name'\r\n            placeholder='Name'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            defaultValue={values.name}\r\n            className={hasError('name')}\r\n          />\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            defaultValue={values.doctor}\r\n            placeholder='Doctor'\r\n            onBlur={handleBlur}\r\n            name='doctor'\r\n            onChange={handleChange}\r\n            className={hasError('doctor')}\r\n          />\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            defaultValue={values.email}\r\n            placeholder='Email'\r\n            name='email'\r\n            type='email'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('email')}\r\n          />\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            defaultValue={values.date}\r\n            placeholder='Date'\r\n            name='date'\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            className={hasError('date')}\r\n          />\r\n        </div>\r\n\r\n        <div className='row'>\r\n          <div className='col-sm-12 col-md-6'>\r\n            <div className='form-group'>\r\n              <Input\r\n                name='from'\r\n                placeholder='From'\r\n                defaultValue={from}\r\n                onChange={handleChange}\r\n                onBlur={handleBlur}\r\n                className={hasError('from')}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className='col-sm-12 col-md-6'>\r\n            <div className='form-group'>\r\n              <Input\r\n                name='to'\r\n                placeholder='To'\r\n                defaultValue={to}\r\n                onChange={handleChange}\r\n                onBlur={handleBlur}\r\n                className={hasError('to')}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            type='phone'\r\n            name='number'\r\n            onBlur={handleBlur}\r\n            placeholder='Number'\r\n            onChange={handleChange}\r\n            defaultValue={values.number}\r\n            className={hasError('number')}\r\n          />\r\n        </div>\r\n\r\n        <div className='form-group'>\r\n          <Input\r\n            name='injury'\r\n            placeholder='Injury'\r\n            onChange={handleChange}\r\n            defaultValue={values.injury}\r\n            onBlur={handleBlur}\r\n            className={hasError('injury')}\r\n          />\r\n        </div>\r\n\r\n        <div className='d-flex justify-content-between buttons-list settings-actions'>\r\n          <Button danger onClick={handleCancel}>\r\n            Cancel\r\n          </Button>\r\n\r\n          <Button disabled={!isValid} type='primary' htmlType='submit'>\r\n            {submitText}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppointmentForm;\r\n"]},"metadata":{},"sourceType":"module"}