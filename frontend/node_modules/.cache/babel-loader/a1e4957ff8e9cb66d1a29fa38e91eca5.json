{"ast":null,"code":"import _asyncToGenerator from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\nginx\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from'react';import axios from'axios';export function useFetch(url){var initialState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var callback=arguments.length>2?arguments[2]:undefined;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:result=_context.sent;return _context.abrupt(\"return\",result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}useEffect(function(){getData().then(function(data){if(callback){callback(data);}setData(data);}).catch(console.error);},[url]);return[data,setData];}","map":{"version":3,"sources":["D:/nginx/frontend/src/hooks/useFetch.tsx"],"names":["useEffect","useState","axios","useFetch","url","initialState","callback","data","setData","getData","get","result","then","catch","console","error"],"mappings":"+TAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,SAASC,CAAAA,QAAT,CACLC,GADK,CAImB,IAFxBC,CAAAA,YAEwB,2DAFN,IAEM,IADxBC,CAAAA,QACwB,2CACxB,cAAwBL,QAAQ,CAAII,YAAJ,CAAhC,wCAAOE,IAAP,eAAaC,OAAb,eADwB,QAGTC,CAAAA,OAHS,+HAGxB,oKACuBP,CAAAA,KAAK,CAACQ,GAAN,CAAUN,GAAV,CADvB,QACQO,MADR,+CAESA,MAAM,CAACJ,IAFhB,wDAHwB,0CAQxBP,SAAS,CAAC,UAAM,CACdS,OAAO,GACJG,IADH,CACQ,SAACL,IAAD,CAAU,CACd,GAAID,QAAJ,CAAc,CACZA,QAAQ,CAACC,IAAD,CAAR,CACD,CAEDC,OAAO,CAACD,IAAD,CAAP,CACD,CAPH,EAQGM,KARH,CAQSC,OAAO,CAACC,KARjB,EASD,CAVQ,CAUN,CAACX,GAAD,CAVM,CAAT,CAYA,MAAO,CAACG,IAAD,CAAOC,OAAP,CAAP,CACD","sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nexport function useFetch<T>(\r\n  url: string,\r\n  initialState: T = null,\r\n  callback?: (T) => any\r\n): [T, (data: T) => void] {\r\n  const [data, setData] = useState<T>(initialState);\r\n\r\n  async function getData() {\r\n    const result = await axios.get(url);\r\n    return result.data;\r\n  }\r\n\r\n  useEffect(() => {\r\n    getData()\r\n      .then((data) => {\r\n        if (callback) {\r\n          callback(data);\r\n        }\r\n\r\n        setData(data);\r\n      })\r\n      .catch(console.error);\r\n  }, [url]);\r\n\r\n  return [data, setData];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}