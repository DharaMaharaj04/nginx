{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import\"antd/es/table/style\";import _Table from\"antd/es/table\";import\"antd/es/tag/style\";import _Tag from\"antd/es/tag\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"antd/es/avatar/style\";import _Avatar from\"antd/es/avatar\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import PatientForm from'../../../layout/components/patients/PatientForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PatientImg=function PatientImg(_ref){var img=_ref.img;var isData=img.startsWith('data:image');var isWithPath=img.startsWith('http');if(isData||isWithPath){return/*#__PURE__*/_jsx(_Avatar,{size:40,src:img});}return/*#__PURE__*/_jsx(_Avatar,{size:40,src:\"\".concat(window.location.origin,\"/\").concat(img)});};var PatientsTable=function PatientsTable(_ref2){var patients=_ref2.patients,_ref2$onEditPatient=_ref2.onEditPatient,onEditPatient=_ref2$onEditPatient===void 0?function(){return null;}:_ref2$onEditPatient,_ref2$onDeletePatient=_ref2.onDeletePatient,onDeletePatient=_ref2$onDeletePatient===void 0?function(){return null;}:_ref2$onDeletePatient;var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),patient=_useState2[0],setPatient=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visibility=_useState4[0],setVisibility=_useState4[1];var closeModal=function closeModal(){return setVisibility(false);};var handleShowInfo=function handleShowInfo(){return history.push('/vertical/patient-profile');};var handleDeletePatient=function handleDeletePatient(id){return onDeletePatient(id);};var handleEditPatient=function handleEditPatient(patient){setPatient(patient);setVisibility(true);};var actions=function actions(patient){return/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-list nowrap\",children:[/*#__PURE__*/_jsx(_Button,{shape:\"circle\",onClick:handleShowInfo,children:/*#__PURE__*/_jsx(\"span\",{className:\"icofont icofont-external-link\"})}),/*#__PURE__*/_jsx(_Button,{onClick:handleEditPatient.bind({},patient),shape:\"circle\",type:\"primary\",children:/*#__PURE__*/_jsx(\"span\",{className:\"icofont icofont-edit-alt\"})}),/*#__PURE__*/_jsx(_Button,{onClick:handleDeletePatient.bind({},patient.id),shape:\"circle\",danger:true,children:/*#__PURE__*/_jsx(\"span\",{className:\"icofont icofont-ui-delete\"})})]});};var columns=[{// key: 'img',\n// title: 'Photo',\n// dataIndex: 'img',\n// render: (img) => <PatientImg img={img} />\n},{key:'name',dataIndex:'name',title:'Name',sorter:function sorter(a,b){return a.name>b.name?1:-1;},render:function render(name){return/*#__PURE__*/_jsx(\"strong\",{children:name});}},{key:'id',dataIndex:'id',title:'ID',sorter:function sorter(a,b){return a.id>b.id?1:-1;},render:function render(id){return/*#__PURE__*/_jsx(\"span\",{className:\"nowrap\",style:{color:'#a5a5a5'},children:id});}},{key:'age',dataIndex:'age',title:'Age',sorter:function sorter(a,b){return a.age-b.age;},render:function render(age){return/*#__PURE__*/_jsx(\"span\",{className:\"nowrap\",style:{color:'#a5a5a5'},children:age});}},{key:'address',dataIndex:'address',title:'Address',render:function render(address){return/*#__PURE__*/_jsx(\"span\",{style:{minWidth:200,display:'block'},children:address});}},{key:'number',dataIndex:'number',title:'Number',render:function render(phone){return/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-baseline nowrap\",style:{color:'#336cfb'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"icofont icofont-ui-cell-phone mr-1\",style:{fontSize:16}}),phone]});}},{key:'visit',dataIndex:'lastVisit',title:'Last visit',render:function render(visit){return/*#__PURE__*/_jsx(\"span\",{className:\"nowrap\",style:{color:'#a5a5a5'},children:visit});}},{key:'status',dataIndex:'status',title:'Status',render:function render(status){return/*#__PURE__*/_jsx(_Tag,{style:{borderRadius:20},color:status==='Approved'?'#b7ce63':'#cec759',children:status});},sorter:function sorter(a,b){return a.status>b.status?1:-1;}},{key:'actions',title:'Actions',render:actions}];var pagination=patients.length<=10?false:{};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(_Table,{pagination:pagination,className:\"accent-header\",rowKey:\"id\",dataSource:patients,columns:columns}),/*#__PURE__*/_jsx(_Modal,{visible:visibility,footer:null,onCancel:closeModal,title:/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Add patient\"}),children:/*#__PURE__*/_jsx(PatientForm,{submitText:\"Update patient\",onCancel:closeModal,onSubmit:onEditPatient,patient:patient})})]});};export default PatientsTable;","map":{"version":3,"sources":["D:/nginx/frontend/src/pages/dashboards/patients/PatientsTable.tsx"],"names":["React","useState","useHistory","PatientForm","PatientImg","img","isData","startsWith","isWithPath","window","location","origin","PatientsTable","patients","onEditPatient","onDeletePatient","history","patient","setPatient","visibility","setVisibility","closeModal","handleShowInfo","push","handleDeletePatient","id","handleEditPatient","actions","bind","columns","key","dataIndex","title","sorter","a","b","name","render","color","age","address","minWidth","display","phone","fontSize","visit","status","borderRadius","pagination","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { ColumnProps } from 'antd/es/table';\r\nimport { Avatar, Table, Button, Modal, Tag } from 'antd';\r\n\r\nimport { IPatient } from '../../../interfaces/patient';\r\n\r\nimport PatientForm from '../../../layout/components/patients/PatientForm';\r\n\r\ntype Props = {\r\n  patients: IPatient[];\r\n  onEditPatient?: (patient: IPatient) => void;\r\n  onDeletePatient?: (id: string) => void;\r\n};\r\n\r\ntype PatientsImgProps = {\r\n  img: string;\r\n};\r\n\r\nconst PatientImg = ({ img }: PatientsImgProps) => {\r\n  const isData = img.startsWith('data:image');\r\n  const isWithPath = img.startsWith('http');\r\n\r\n  if (isData || isWithPath) {\r\n    return <Avatar size={40} src={img} />;\r\n  }\r\n\r\n  return <Avatar size={40} src={`${window.location.origin}/${img}`} />;\r\n};\r\n\r\nconst PatientsTable = ({\r\n  patients,\r\n  onEditPatient = () => null,\r\n  onDeletePatient = () => null\r\n}: Props) => {\r\n  const history = useHistory();\r\n\r\n  const [patient, setPatient] = useState(null);\r\n  const [visibility, setVisibility] = useState(false);\r\n\r\n  const closeModal = () => setVisibility(false);\r\n\r\n  const handleShowInfo = () => history.push('/vertical/patient-profile');\r\n  const handleDeletePatient = (id) => onDeletePatient(id);\r\n  const handleEditPatient = (patient: IPatient) => {\r\n    setPatient(patient);\r\n    setVisibility(true);\r\n  };\r\n\r\n  const actions = (patient: IPatient) => (\r\n    <div className='buttons-list nowrap'>\r\n      <Button shape='circle' onClick={handleShowInfo}>\r\n        <span className='icofont icofont-external-link' />\r\n      </Button>\r\n      <Button onClick={handleEditPatient.bind({}, patient)} shape='circle' type='primary'>\r\n        <span className='icofont icofont-edit-alt' />\r\n      </Button>\r\n      <Button onClick={handleDeletePatient.bind({}, patient.id)} shape='circle' danger>\r\n        <span className='icofont icofont-ui-delete' />\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  const columns: ColumnProps<IPatient>[] = [\r\n    {\r\n      // key: 'img',\r\n      // title: 'Photo',\r\n      // dataIndex: 'img',\r\n      // render: (img) => <PatientImg img={img} />\r\n    },\r\n    {\r\n      key: 'name',\r\n      dataIndex: 'name',\r\n      title: 'Name',\r\n      sorter: (a, b) => (a.name > b.name ? 1 : -1),\r\n      render: (name) => <strong>{name}</strong>\r\n    },\r\n    {\r\n      key: 'id',\r\n      dataIndex: 'id',\r\n      title: 'ID',\r\n      sorter: (a, b) => (a.id > b.id ? 1 : -1),\r\n      render: (id) => (\r\n        <span className='nowrap' style={{ color: '#a5a5a5' }}>\r\n          {id}\r\n        </span>\r\n      )\r\n    },\r\n    {\r\n      key: 'age',\r\n      dataIndex: 'age',\r\n      title: 'Age',\r\n      sorter: (a, b) => a.age - b.age,\r\n      render: (age) => (\r\n        <span className='nowrap' style={{ color: '#a5a5a5' }}>\r\n          {age}\r\n        </span>\r\n      )\r\n    },\r\n    {\r\n      key: 'address',\r\n      dataIndex: 'address',\r\n      title: 'Address',\r\n      render: (address) => <span style={{ minWidth: 200, display: 'block' }}>{address}</span>\r\n    },\r\n    {\r\n      key: 'number',\r\n      dataIndex: 'number',\r\n      title: 'Number',\r\n      render: (phone) => (\r\n        <span className='d-flex align-baseline nowrap' style={{ color: '#336cfb' }}>\r\n          <span className='icofont icofont-ui-cell-phone mr-1' style={{ fontSize: 16 }} />\r\n          {phone}\r\n        </span>\r\n      )\r\n    },\r\n    {\r\n      key: 'visit',\r\n      dataIndex: 'lastVisit',\r\n      title: 'Last visit',\r\n      render: (visit) => (\r\n        <span className='nowrap' style={{ color: '#a5a5a5' }}>\r\n          {visit}\r\n        </span>\r\n      )\r\n    },\r\n    {\r\n      key: 'status',\r\n      dataIndex: 'status',\r\n      title: 'Status',\r\n      render: (status) => (\r\n        <Tag style={{ borderRadius: 20 }} color={status === 'Approved' ? '#b7ce63' : '#cec759'}>\r\n          {status}\r\n        </Tag>\r\n      ),\r\n      sorter: (a, b) => (a.status > b.status ? 1 : -1)\r\n    },\r\n    {\r\n      key: 'actions',\r\n      title: 'Actions',\r\n      render: actions\r\n    }\r\n  ];\r\n\r\n  const pagination = patients.length <= 10 ? false : {};\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        pagination={pagination}\r\n        className='accent-header'\r\n        rowKey='id'\r\n        dataSource={patients}\r\n        columns={columns}\r\n      />\r\n\r\n      <Modal\r\n        visible={visibility}\r\n        footer={null}\r\n        onCancel={closeModal}\r\n        title={<h3 className='title'>Add patient</h3>}\r\n      >\r\n        <PatientForm\r\n          submitText='Update patient'\r\n          onCancel={closeModal}\r\n          onSubmit={onEditPatient}\r\n          patient={patient}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PatientsTable;\r\n"]},"metadata":{},"sourceType":"module"}