{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/switch/style\";import _Switch from\"antd/es/switch\";import\"antd/es/select/style\";import _Select from\"antd/es/select\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import _defineProperty from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useRef}from'react';import{useHistory}from'react-router-dom';import ColorPicker from'../../../ui/color-picker/ColorPicker';import'./SettingsForm.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SettingsForm=function SettingsForm(_ref){var settings=_ref.settings,onResetSettings=_ref.onResetSettings,onUpdateSetting=_ref.onUpdateSetting;var downloadLink=useRef(null);var boxed=settings.boxed,sidebarBg=settings.sidebarBg,topbarBg=settings.topbarBg;var history=useHistory();var layoutUrl=history.location.pathname.split('/')[1];var handleReset=function handleReset(){onResetSettings();};var handleDownload=function handleDownload(){var settingsJSON=JSON.stringify(settings);var dataStr='data:text/json;charset=utf-8,'+encodeURIComponent(settingsJSON);downloadLink.current.setAttribute('href',dataStr);downloadLink.current.setAttribute('download','settings.json');downloadLink.current.click();};var setValue=function setValue(name,value){onUpdateSetting(_objectSpread(_objectSpread({},settings),{},_defineProperty({},name,value)));};var handleLayoutChange=function handleLayoutChange(type){var currentRoute=history.location.pathname.split('/')[2];history.push(\"/\".concat(type,\"/\").concat(currentRoute));setValue('layout',type);};var handleSideBgChange=function handleSideBgChange(_ref2){var color=_ref2.color,contrast=_ref2.contrast;return onUpdateSetting(_objectSpread(_objectSpread({},settings),{},{sidebarBg:color,sidebarColor:contrast}));};var handleNavBgChange=function handleNavBgChange(_ref3){var color=_ref3.color;return setValue('topbarBg',color);};var handleBoxedChange=function handleBoxedChange(boxed){return setValue('boxed',boxed);};var sidebarPickerLabel=layoutUrl==='vertical'?'Sidebar background':'Second navbar background';return/*#__PURE__*/_jsxs(_Form,{layout:\"vertical\",className:\"settings-form\",children:[/*#__PURE__*/_jsx(_Form.Item,{label:\"Topbar background\",children:/*#__PURE__*/_jsx(ColorPicker,{onColorChange:handleNavBgChange,color:topbarBg})}),/*#__PURE__*/_jsx(_Form.Item,{label:sidebarPickerLabel,children:/*#__PURE__*/_jsx(ColorPicker,{onColorChange:handleSideBgChange,color:sidebarBg})}),/*#__PURE__*/_jsx(_Form.Item,{label:\"Layout\",children:/*#__PURE__*/_jsxs(_Select,{onChange:handleLayoutChange,defaultValue:layoutUrl,children:[/*#__PURE__*/_jsx(_Select.Option,{value:'vertical',children:\"Vertical\"}),/*#__PURE__*/_jsx(_Select.Option,{value:'horizontal',children:\"Horizontal\"})]})}),/*#__PURE__*/_jsx(_Form.Item,{label:\"Boxed\",children:/*#__PURE__*/_jsx(_Switch,{onChange:handleBoxedChange,checked:boxed})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between buttons-list settings-actions\",children:[/*#__PURE__*/_jsx(_Button,{danger:true,onClick:handleReset,children:\"Reset to default\"}),/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:handleDownload,children:\"Download settings\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",ref:downloadLink,style:{display:'none'}})]});};export default SettingsForm;","map":{"version":3,"sources":["D:/nginx/frontend/src/layout/components/settings/SettingsForm.tsx"],"names":["React","useRef","useHistory","ColorPicker","SettingsForm","settings","onResetSettings","onUpdateSetting","downloadLink","boxed","sidebarBg","topbarBg","history","layoutUrl","location","pathname","split","handleReset","handleDownload","settingsJSON","JSON","stringify","dataStr","encodeURIComponent","current","setAttribute","click","setValue","name","value","handleLayoutChange","type","currentRoute","push","handleSideBgChange","color","contrast","sidebarColor","handleNavBgChange","handleBoxedChange","sidebarPickerLabel","display"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { Form, Select, Switch, Button } from 'antd';\r\n\r\nimport ColorPicker from '../../../ui/color-picker/ColorPicker';\r\n\r\nimport { IAppSettings } from '../../../interfaces/settings';\r\n\r\nimport './SettingsForm.scss';\r\n\r\ntype Props = {\r\n  settings: IAppSettings;\r\n  onResetSettings: () => void;\r\n  onUpdateSetting: (settings: IAppSettings) => void;\r\n};\r\n\r\nconst SettingsForm = ({ settings, onResetSettings, onUpdateSetting }: Props) => {\r\n  const downloadLink = useRef<HTMLAnchorElement>(null);\r\n  const { boxed, sidebarBg, topbarBg } = settings;\r\n\r\n  const history = useHistory();\r\n  const layoutUrl = history.location.pathname.split('/')[1];\r\n\r\n  const handleReset = () => {\r\n    onResetSettings();\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const settingsJSON = JSON.stringify(settings);\r\n    const dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(settingsJSON);\r\n\r\n    downloadLink.current.setAttribute('href', dataStr);\r\n    downloadLink.current.setAttribute('download', 'settings.json');\r\n    downloadLink.current.click();\r\n  };\r\n\r\n  const setValue = (name: string, value: any) => {\r\n    onUpdateSetting({ ...settings, [name]: value });\r\n  };\r\n\r\n  const handleLayoutChange = (type: string) => {\r\n    const currentRoute = history.location.pathname.split('/')[2];\r\n\r\n    history.push(`/${type}/${currentRoute}`);\r\n    setValue('layout', type);\r\n  };\r\n\r\n  const handleSideBgChange = ({ color, contrast }) =>\r\n    onUpdateSetting({ ...settings, sidebarBg: color, sidebarColor: contrast });\r\n\r\n  const handleNavBgChange = ({ color }) => setValue('topbarBg', color);\r\n  const handleBoxedChange = (boxed: boolean) => setValue('boxed', boxed);\r\n\r\n  const sidebarPickerLabel =\r\n    layoutUrl === 'vertical' ? 'Sidebar background' : 'Second navbar background';\r\n\r\n  return (\r\n    <Form layout='vertical' className='settings-form'>\r\n      <Form.Item label='Topbar background'>\r\n        <ColorPicker onColorChange={handleNavBgChange} color={topbarBg} />\r\n      </Form.Item>\r\n\r\n      <Form.Item label={sidebarPickerLabel}>\r\n        <ColorPicker onColorChange={handleSideBgChange} color={sidebarBg} />\r\n      </Form.Item>\r\n\r\n      <Form.Item label='Layout'>\r\n        <Select onChange={handleLayoutChange} defaultValue={layoutUrl}>\r\n          <Select.Option value={'vertical'}>Vertical</Select.Option>\r\n\r\n          <Select.Option value={'horizontal'}>Horizontal</Select.Option>\r\n        </Select>\r\n      </Form.Item>\r\n\r\n      <Form.Item label='Boxed'>\r\n        <Switch onChange={handleBoxedChange} checked={boxed} />\r\n      </Form.Item>\r\n\r\n      <div className='d-flex justify-content-between buttons-list settings-actions'>\r\n        <Button danger onClick={handleReset}>\r\n          Reset to default\r\n        </Button>\r\n\r\n        <Button type='primary' onClick={handleDownload}>\r\n          Download settings\r\n        </Button>\r\n      </div>\r\n      <a href='#' ref={downloadLink} style={{ display: 'none' }} />\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default SettingsForm;\r\n"]},"metadata":{},"sourceType":"module"}