{"ast":null,"code":"import _asyncToGenerator from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:\\\\nginx\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useDispatch}from'react-redux';import{useEffect,useState}from'react';import axios from'axios';import{setPageData,updatePageDada}from'../redux/page-data/actions';export function usePageData(pageData){var dispatch=useDispatch();useEffect(function(){dispatch(setPageData(_objectSpread(_objectSpread({},pageData),{},{loaded:true})));},[pageData,dispatch]);}export function useFetchPageData(url){var initialState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var callback=arguments.length>2?arguments[2]:undefined;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var dispatch=useDispatch();function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:result=_context.sent;return _context.abrupt(\"return\",result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}useEffect(function(){getData().then(function(data){if(callback){callback(data);}setTimeout(function(){return dispatch(updatePageDada({fulFilled:true,loaded:true}));},300);setData(data);}).catch(console.error);},[url,dispatch]);return[data,setData];}","map":{"version":3,"sources":["D:/nginx/frontend/src/hooks/usePage.tsx"],"names":["useDispatch","useEffect","useState","axios","setPageData","updatePageDada","usePageData","pageData","dispatch","loaded","useFetchPageData","url","initialState","callback","data","setData","getData","get","result","then","setTimeout","fulFilled","catch","console","error"],"mappings":"qaAAA,OAASA,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,4BAA5C,CAIA,MAAO,SAASC,CAAAA,WAAT,CAAqBC,QAArB,CAA0C,CAC/C,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEAC,SAAS,CAAC,UAAM,CACdO,QAAQ,CAACJ,WAAW,gCAAMG,QAAN,MAAgBE,MAAM,CAAE,IAAxB,GAAZ,CAAR,CACD,CAFQ,CAEN,CAACF,QAAD,CAAWC,QAAX,CAFM,CAAT,CAGD,CAED,MAAO,SAASE,CAAAA,gBAAT,CACLC,GADK,CAImB,IAFxBC,CAAAA,YAEwB,2DAFN,IAEM,IADxBC,CAAAA,QACwB,2CACxB,cAAwBX,QAAQ,CAAIU,YAAJ,CAAhC,wCAAOE,IAAP,eAAaC,OAAb,eACA,GAAMP,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAFwB,QAITgB,CAAAA,OAJS,+HAIxB,oKACuBb,CAAAA,KAAK,CAACc,GAAN,CAAUN,GAAV,CADvB,QACQO,MADR,+CAESA,MAAM,CAACJ,IAFhB,wDAJwB,0CASxBb,SAAS,CAAC,UAAM,CACde,OAAO,GACJG,IADH,CACQ,SAACL,IAAD,CAAU,CACd,GAAID,QAAJ,CAAc,CACZA,QAAQ,CAACC,IAAD,CAAR,CACD,CAEDM,UAAU,CAAC,iBAAMZ,CAAAA,QAAQ,CAACH,cAAc,CAAC,CAAEgB,SAAS,CAAE,IAAb,CAAmBZ,MAAM,CAAE,IAA3B,CAAD,CAAf,CAAd,EAAD,CAAoE,GAApE,CAAV,CAEAM,OAAO,CAACD,IAAD,CAAP,CACD,CATH,EAUGQ,KAVH,CAUSC,OAAO,CAACC,KAVjB,EAWD,CAZQ,CAYN,CAACb,GAAD,CAAMH,QAAN,CAZM,CAAT,CAcA,MAAO,CAACM,IAAD,CAAOC,OAAP,CAAP,CACD","sourcesContent":["import { useDispatch } from 'react-redux';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { setPageData, updatePageDada } from '../redux/page-data/actions';\r\n\r\nimport { IPageData } from '../interfaces/page';\r\n\r\nexport function usePageData(pageData: IPageData) {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(setPageData({ ...pageData, loaded: true }));\r\n  }, [pageData, dispatch]);\r\n}\r\n\r\nexport function useFetchPageData<T>(\r\n  url: string,\r\n  initialState: T = null,\r\n  callback?: (T) => any\r\n): [T, (data: T) => void] {\r\n  const [data, setData] = useState<T>(initialState);\r\n  const dispatch = useDispatch();\r\n\r\n  async function getData() {\r\n    const result = await axios.get(url);\r\n    return result.data;\r\n  }\r\n\r\n  useEffect(() => {\r\n    getData()\r\n      .then((data) => {\r\n        if (callback) {\r\n          callback(data);\r\n        }\r\n\r\n        setTimeout(() => dispatch(updatePageDada({ fulFilled: true, loaded: true })), 300);\r\n\r\n        setData(data);\r\n      })\r\n      .catch(console.error);\r\n  }, [url, dispatch]);\r\n\r\n  return [data, setData];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}