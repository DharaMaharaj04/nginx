{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/avatar/style\";import _Avatar from\"antd/es/avatar\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var anonymousImg=\"\".concat(window.origin,\"/content/anonymous-400.jpg\");var ImageLoader=function ImageLoader(_ref){var src=_ref.src,_ref$size=_ref.size,size=_ref$size===void 0?40:_ref$size,_ref$onLoad=_ref.onLoad,onLoad=_ref$onLoad===void 0?function(){return null;}:_ref$onLoad;var input=useRef(null);var _useState=useState(anonymousImg),_useState2=_slicedToArray(_useState,2),img=_useState2[0],setImg=_useState2[1];useEffect(function(){if(!src){onLoad(img);}return function(){setImg(null);};},[]);var handleClick=function handleClick(){return input.current.click();};var handleLoad=function handleLoad(e){var file=e.target.files[0];var reader=new FileReader();reader.onloadend=function(){var result=reader.result;onLoad(result);setImg(result);};reader.readAsDataURL(file);};var icon=/*#__PURE__*/_jsx(\"span\",{className:\"icofont icofont-ui-user ml-2\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{ref:input,onChange:handleLoad,type:\"file\",style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(_Avatar,{src:src||img,size:size,className:\"mr-4\"}),/*#__PURE__*/_jsxs(_Button,{type:'primary',className:\"btn-outline\",onClick:handleClick,children:[\"Select image \",icon]})]})]});};export default ImageLoader;","map":{"version":3,"sources":["D:/nginx/frontend/src/layout/components/patients/ImageLoader.tsx"],"names":["React","useEffect","useRef","useState","anonymousImg","window","origin","ImageLoader","src","size","onLoad","input","img","setImg","handleClick","current","click","handleLoad","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","icon","display"],"mappings":"yOAAA,MAAOA,CAAAA,KAAP,EAA6BC,SAA7B,CAAwCC,MAAxC,CAAgDC,QAAhD,KAAgE,OAAhE,C,6IAIA,GAAMC,CAAAA,YAAY,WAAMC,MAAM,CAACC,MAAb,8BAAlB,CAQA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAoD,IAAjDC,CAAAA,GAAiD,MAAjDA,GAAiD,gBAA5CC,IAA4C,CAA5CA,IAA4C,oBAArC,EAAqC,4BAAjCC,MAAiC,CAAjCA,MAAiC,sBAAxB,iBAAM,KAAN,EAAwB,aACtE,GAAMC,CAAAA,KAAK,CAAGT,MAAM,CAAmB,IAAnB,CAApB,CACA,cAAsBC,QAAQ,CAASC,YAAT,CAA9B,wCAAOQ,GAAP,eAAYC,MAAZ,eAEAZ,SAAS,CAAC,UAAM,CACd,GAAI,CAACO,GAAL,CAAU,CACRE,MAAM,CAACE,GAAD,CAAN,CACD,CAED,MAAO,WAAM,CACXC,MAAM,CAAC,IAAD,CAAN,CACD,CAFD,CAGD,CARQ,CAQN,EARM,CAAT,CAUA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMH,CAAAA,KAAK,CAACI,OAAN,CAAcC,KAAd,EAAN,EAApB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAsC,CACvD,GAAIC,CAAAA,IAAU,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAjB,CACA,GAAIC,CAAAA,MAAkB,CAAG,GAAIC,CAAAA,UAAJ,EAAzB,CAEAD,MAAM,CAACE,SAAP,CAAmB,UAAM,CACvB,GAAMC,CAAAA,MAAM,CAAGH,MAAM,CAACG,MAAtB,CAEAf,MAAM,CAACe,MAAD,CAAN,CACAZ,MAAM,CAACY,MAAD,CAAN,CACD,CALD,CAOAH,MAAM,CAACI,aAAP,CAAqBP,IAArB,EACD,CAZD,CAcA,GAAMQ,CAAAA,IAAI,cAAG,aAAM,SAAS,CAAC,8BAAhB,EAAb,CAEA,mBACE,wCACE,cAAO,GAAG,CAAEhB,KAAZ,CAAmB,QAAQ,CAAEM,UAA7B,CAAyC,IAAI,CAAC,MAA9C,CAAqD,KAAK,CAAE,CAAEW,OAAO,CAAE,MAAX,CAA5D,EADF,cAEE,aAAK,SAAS,CAAC,2BAAf,wBACE,cAAQ,GAAG,CAAEpB,GAAG,EAAII,GAApB,CAAyB,IAAI,CAAEH,IAA/B,CAAqC,SAAS,CAAC,MAA/C,EADF,cAGE,eAAQ,IAAI,CAAE,SAAd,CAAyB,SAAS,CAAC,aAAnC,CAAiD,OAAO,CAAEK,WAA1D,2BACgBa,IADhB,GAHF,GAFF,GADF,CAYD,CA5CD,CA8CA,cAAepB,CAAAA,WAAf","sourcesContent":["import React, { ChangeEvent, useEffect, useRef, useState } from 'react';\r\n\r\nimport { Avatar, Button } from 'antd';\r\n\r\nconst anonymousImg = `${window.origin}/content/anonymous-400.jpg`;\r\n\r\ntype Props = {\r\n  src?: string;\r\n  size?: number;\r\n  onLoad?: (img) => void;\r\n};\r\n\r\nconst ImageLoader = ({ src, size = 40, onLoad = () => null }: Props) => {\r\n  const input = useRef<HTMLInputElement>(null);\r\n  const [img, setImg] = useState<string>(anonymousImg);\r\n\r\n  useEffect(() => {\r\n    if (!src) {\r\n      onLoad(img);\r\n    }\r\n\r\n    return () => {\r\n      setImg(null);\r\n    };\r\n  }, []);\r\n\r\n  const handleClick = () => input.current.click();\r\n\r\n  const handleLoad = (e: ChangeEvent<HTMLInputElement>) => {\r\n    let file: File = e.target.files[0];\r\n    let reader: FileReader = new FileReader();\r\n\r\n    reader.onloadend = () => {\r\n      const result = reader.result as string;\r\n\r\n      onLoad(result);\r\n      setImg(result);\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const icon = <span className='icofont icofont-ui-user ml-2' />;\r\n\r\n  return (\r\n    <>\r\n      <input ref={input} onChange={handleLoad} type='file' style={{ display: 'none' }} />\r\n      <div className='d-flex align-items-center'>\r\n        <Avatar src={src || img} size={size} className='mr-4' />\r\n\r\n        <Button type={'primary'} className='btn-outline' onClick={handleClick}>\r\n          Select image {icon}\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageLoader;\r\n"]},"metadata":{},"sourceType":"module"}