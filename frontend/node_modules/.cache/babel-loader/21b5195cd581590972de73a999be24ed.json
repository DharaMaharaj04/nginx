{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import _toConsumableArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import React,{useState}from'react';import{useFormik}from'formik';import*as Yup from'yup';import BillingTable from'../../medic/components/BillingTable';import PageAction from'../../../layout/components/page-action/PageAction';import{hasErrorFactory}from'../../../utils/hasError';import{useGetPayments}from'../../../hooks/useGetBillings';import{usePageData}from'../../../hooks/usePage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var pageData={title:'Payments',fulFilled:true,breadcrumbs:[{title:'Medicine',route:'default-dashboard'},{title:'Payments'}]};var Item=_Form.Item;var paymentScheme=Yup.object({billNo:Yup.string().required(),patient:Yup.string().required(),doctor:Yup.string().required(),billDate:Yup.string().required(),charges:Yup.string().required(),tax:Yup.string().required(),discount:Yup.string().required(),total:Yup.string().required()});var PaymentForm=function PaymentForm(_ref){var _onSubmit=_ref.onSubmit,onClose=_ref.onClose;var _useFormik=useFormik({initialValues:{},initialErrors:{empty:null},validationSchema:paymentScheme,onSubmit:function onSubmit(values){_onSubmit(values);onClose();}}),handleSubmit=_useFormik.handleSubmit,handleChange=_useFormik.handleChange,isValid=_useFormik.isValid,errors=_useFormik.errors,touched=_useFormik.touched,handleBlur=_useFormik.handleBlur;var hasError=hasErrorFactory(touched,errors);var handleClose=function handleClose(){onClose();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(_Form,{layout:\"vertical\",children:[/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{type:\"number\",name:\"billNo\",placeholder:\"Bill NO\",onBlur:handleBlur,onChange:handleChange,className:hasError('billNo')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"patient\",placeholder:\"Patient\",onBlur:handleBlur,onChange:handleChange,className:hasError('patient')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"doctor\",placeholder:\"Doctor\",onBlur:handleBlur,onChange:handleChange,className:hasError('doctor')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"billDate\",placeholder:\"Date\",onBlur:handleBlur,onChange:handleChange,className:hasError('billDate')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"charges\",placeholder:\"Charges\",onBlur:handleBlur,onChange:handleChange,className:hasError('charges')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"tax\",placeholder:\"Tax\",onBlur:handleBlur,onChange:handleChange,className:hasError('tax')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"discount\",placeholder:\"Discount\",onBlur:handleBlur,onChange:handleChange,className:hasError('discount')})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(_Input,{name:\"total\",placeholder:\"Total\",onBlur:handleBlur,onChange:handleChange,className:hasError('total')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer d-flex justify-content-between mt-3\",children:[/*#__PURE__*/_jsx(_Button,{danger:true,onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(_Button,{htmlType:\"submit\",disabled:!isValid,type:\"primary\",onClick:function onClick(){return handleSubmit();},children:\"Add\"})]})]});};var Payments=function Payments(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisibility=_useState2[1];var _useGetPayments=useGetPayments(),_useGetPayments2=_slicedToArray(_useGetPayments,2),billings=_useGetPayments2[0],setBillings=_useGetPayments2[1];usePageData(pageData);var handleSubmit=function handleSubmit(payment){setBillings([payment].concat(_toConsumableArray(billings)));};var handleClose=function handleClose(){return setVisibility(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BillingTable,{billings:billings,type:\"none\",pagination:{hideOnSinglePage:true}}),/*#__PURE__*/_jsx(PageAction,{onClick:function onClick(){return setVisibility(true);},icon:\"icofont-plus\",type:\"primary\"}),/*#__PURE__*/_jsx(_Modal,{title:/*#__PURE__*/_jsx(\"h5\",{className:\"m-0\",children:\"Add Payment\"}),onCancel:handleClose,visible:visible,destroyOnClose:true,footer:null,children:/*#__PURE__*/_jsx(PaymentForm,{onSubmit:handleSubmit,onClose:handleClose})})]});};export default Payments;","map":{"version":3,"sources":["D:/nginx/frontend/src/pages/dashboards/payments/Payments.tsx"],"names":["React","useState","useFormik","Yup","BillingTable","PageAction","hasErrorFactory","useGetPayments","usePageData","pageData","title","fulFilled","breadcrumbs","route","Item","paymentScheme","object","billNo","string","required","patient","doctor","billDate","charges","tax","discount","total","PaymentForm","onSubmit","onClose","initialValues","initialErrors","empty","validationSchema","values","handleSubmit","handleChange","isValid","errors","touched","handleBlur","hasError","handleClose","Payments","visible","setVisibility","billings","setBillings","payment","hideOnSinglePage"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { Button, Form, Input, Modal } from 'antd';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nimport BillingTable from '../../medic/components/BillingTable';\r\nimport PageAction from '../../../layout/components/page-action/PageAction';\r\n\r\nimport { hasErrorFactory } from '../../../utils/hasError';\r\nimport { useGetPayments } from '../../../hooks/useGetBillings';\r\nimport { usePageData } from '../../../hooks/usePage';\r\n\r\nimport { IPageData } from '../../../interfaces/page';\r\n\r\nconst pageData: IPageData = {\r\n  title: 'Payments',\r\n  fulFilled: true,\r\n  breadcrumbs: [\r\n    {\r\n      title: 'Medicine',\r\n      route: 'default-dashboard'\r\n    },\r\n    {\r\n      title: 'Payments'\r\n    }\r\n  ]\r\n};\r\n\r\nconst Item = Form.Item;\r\n\r\nconst paymentScheme = Yup.object({\r\n  billNo: Yup.string().required(),\r\n  patient: Yup.string().required(),\r\n  doctor: Yup.string().required(),\r\n  billDate: Yup.string().required(),\r\n  charges: Yup.string().required(),\r\n  tax: Yup.string().required(),\r\n  discount: Yup.string().required(),\r\n  total: Yup.string().required()\r\n});\r\n\r\nconst PaymentForm = ({ onSubmit, onClose }) => {\r\n  const { handleSubmit, handleChange, isValid, errors, touched, handleBlur } = useFormik<any>({\r\n    initialValues: {},\r\n    initialErrors: { empty: null },\r\n    validationSchema: paymentScheme,\r\n    onSubmit: (values) => {\r\n      onSubmit(values);\r\n      onClose();\r\n    }\r\n  });\r\n\r\n  const hasError = hasErrorFactory(touched, errors);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form layout='vertical'>\r\n        <Item>\r\n          <Input\r\n            type='number'\r\n            name='billNo'\r\n            placeholder='Bill NO'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('billNo')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='patient'\r\n            placeholder='Patient'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('patient')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='doctor'\r\n            placeholder='Doctor'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('doctor')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='billDate'\r\n            placeholder='Date'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('billDate')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='charges'\r\n            placeholder='Charges'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('charges')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='tax'\r\n            placeholder='Tax'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('tax')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='discount'\r\n            placeholder='Discount'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('discount')}\r\n          />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Input\r\n            name='total'\r\n            placeholder='Total'\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            className={hasError('total')}\r\n          />\r\n        </Item>\r\n      </Form>\r\n\r\n      <div className='modal-footer d-flex justify-content-between mt-3'>\r\n        <Button danger onClick={handleClose}>\r\n          Cancel\r\n        </Button>\r\n\r\n        <Button htmlType='submit' disabled={!isValid} type='primary' onClick={() => handleSubmit()}>\r\n          Add\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Payments = () => {\r\n  const [visible, setVisibility] = useState<boolean>(false);\r\n  const [billings, setBillings] = useGetPayments();\r\n  usePageData(pageData);\r\n\r\n  const handleSubmit = (payment) => {\r\n    setBillings([payment, ...billings]);\r\n  };\r\n\r\n  const handleClose = () => setVisibility(false);\r\n\r\n  return (\r\n    <>\r\n      <BillingTable billings={billings} type='none' pagination={{ hideOnSinglePage: true }} />\r\n      <PageAction onClick={() => setVisibility(true)} icon='icofont-plus' type='primary' />\r\n\r\n      <Modal\r\n        title={<h5 className='m-0'>Add Payment</h5>}\r\n        onCancel={handleClose}\r\n        visible={visible}\r\n        destroyOnClose\r\n        footer={null}\r\n      >\r\n        <PaymentForm onSubmit={handleSubmit} onClose={handleClose} />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Payments;\r\n"]},"metadata":{},"sourceType":"module"}