{"ast":null,"code":"import _slicedToArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/nginx/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\nginx\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from'react';import axios from'axios';function fetchSearchData(){return _fetchSearchData.apply(this,arguments);}function _fetchSearchData(){_fetchSearchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios('./data/menu.json');case 2:result=_context.sent;return _context.abrupt(\"return\",result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchSearchData.apply(this,arguments);}var hasRouting=function hasRouting(item){return!!item.routing;};var hasSub=function hasSub(item){return!!item.sub;};var getOption=function getOption(item){return{label:item.title,value:item.layout?\"/\".concat(item.layout,\"/\").concat(item.routing):item.routing};};var setSubTitle=function setSubTitle(itemTitle){return function(subItem){return _objectSpread(_objectSpread({},subItem),{},{title:\"\".concat(itemTitle,\" > \").concat(subItem.title)});};};function parseSearchData(data){var menuItems=data.filter(hasRouting);var menuItemsWithSub=data.filter(hasSub).map(function(item){return _objectSpread(_objectSpread({},item),{},{sub:item.sub.map(setSubTitle(item.title))});}).map(function(item){return item.sub;}).flat();return[].concat(_toConsumableArray(menuItems),_toConsumableArray(menuItemsWithSub)).map(getOption);}export function useSearchData(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchData=_useState2[0],setSearchData=_useState2[1];useEffect(function(){fetchSearchData().then(function(data){var searchData=parseSearchData(data);setSearchData(searchData);}).catch(function(err){return console.log('Server Error',err);});},[]);return searchData;}","map":{"version":3,"sources":["D:/nginx/frontend/src/hooks/useSearchData.tsx"],"names":["useEffect","useState","axios","fetchSearchData","result","data","hasRouting","item","routing","hasSub","sub","getOption","label","title","value","layout","setSubTitle","itemTitle","subItem","parseSearchData","menuItems","filter","menuItemsWithSub","map","flat","useSearchData","searchData","setSearchData","then","catch","err","console","log"],"mappings":"ohBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,QAIeC,CAAAA,e,uJAAf,oKACuBD,CAAAA,KAAK,CAAC,kBAAD,CAD5B,QACQE,MADR,+CAESA,MAAM,CAACC,IAFhB,wD,kDAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,QAAqB,CAAC,CAACA,IAAI,CAACC,OAA5B,EAAnB,CACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACF,IAAD,QAAqB,CAAC,CAACA,IAAI,CAACG,GAA5B,EAAf,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACJ,IAAD,QAAqC,CACrDK,KAAK,CAAEL,IAAI,CAACM,KADyC,CAErDC,KAAK,CAAEP,IAAI,CAACQ,MAAL,YAAkBR,IAAI,CAACQ,MAAvB,aAAiCR,IAAI,CAACC,OAAtC,EAAkDD,IAAI,CAACC,OAFT,CAArC,EAAlB,CAKA,GAAMQ,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,QAAuB,UAACC,OAAD,wCACtCA,OADsC,MAEzCL,KAAK,WAAKI,SAAL,eAAoBC,OAAO,CAACL,KAA5B,CAFoC,IAAvB,EAApB,CAKA,QAASM,CAAAA,eAAT,CAAyBd,IAAzB,CAA+B,CAC7B,GAAMe,CAAAA,SAAS,CAAGf,IAAI,CAACgB,MAAL,CAAYf,UAAZ,CAAlB,CAEA,GAAMgB,CAAAA,gBAAgB,CAAGjB,IAAI,CAC1BgB,MADsB,CACfZ,MADe,EAEtBc,GAFsB,CAElB,SAAChB,IAAD,wCACAA,IADA,MAEHG,GAAG,CAAEH,IAAI,CAACG,GAAL,CAASa,GAAT,CAAaP,WAAW,CAACT,IAAI,CAACM,KAAN,CAAxB,CAFF,IAFkB,EAMtBU,GANsB,CAMlB,SAAChB,IAAD,QAAqBA,CAAAA,IAAI,CAACG,GAA1B,EANkB,EAOtBc,IAPsB,EAAzB,CASA,MAAO,6BAAIJ,SAAJ,qBAAkBE,gBAAlB,GAAoCC,GAApC,CAAwCZ,SAAxC,CAAP,CACD,CAED,MAAO,SAASc,CAAAA,aAAT,EAAyB,CAC9B,cAAoCxB,QAAQ,CAAC,EAAD,CAA5C,wCAAOyB,UAAP,eAAmBC,aAAnB,eAEA3B,SAAS,CAAC,UAAM,CACdG,eAAe,GACZyB,IADH,CACQ,SAACvB,IAAD,CAAU,CACd,GAAMqB,CAAAA,UAAU,CAAGP,eAAe,CAACd,IAAD,CAAlC,CACAsB,aAAa,CAACD,UAAD,CAAb,CACD,CAJH,EAKGG,KALH,CAKS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BF,GAA5B,CAAT,EALT,EAMD,CAPQ,CAON,EAPM,CAAT,CASA,MAAOJ,CAAAA,UAAP,CACD","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport { IMenuItem, IMenuItemSub } from '../interfaces/main-menu';\r\n\r\nasync function fetchSearchData() {\r\n  const result = await axios('./data/menu.json');\r\n  return result.data;\r\n}\r\n\r\nconst hasRouting = (item: IMenuItem) => !!item.routing;\r\nconst hasSub = (item: IMenuItem) => !!item.sub;\r\n\r\nconst getOption = (item: IMenuItem | IMenuItemSub) => ({\r\n  label: item.title,\r\n  value: item.layout ? `/${item.layout}/${item.routing}` : item.routing\r\n});\r\n\r\nconst setSubTitle = (itemTitle: string) => (subItem: IMenuItemSub) => ({\r\n  ...subItem,\r\n  title: `${itemTitle} > ${subItem.title}`\r\n});\r\n\r\nfunction parseSearchData(data) {\r\n  const menuItems = data.filter(hasRouting);\r\n\r\n  const menuItemsWithSub = data\r\n    .filter(hasSub)\r\n    .map((item: IMenuItem) => ({\r\n      ...item,\r\n      sub: item.sub.map(setSubTitle(item.title))\r\n    }))\r\n    .map((item: IMenuItem) => item.sub)\r\n    .flat();\r\n\r\n  return [...menuItems, ...menuItemsWithSub].map(getOption);\r\n}\r\n\r\nexport function useSearchData() {\r\n  const [searchData, setSearchData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchSearchData()\r\n      .then((data) => {\r\n        const searchData = parseSearchData(data);\r\n        setSearchData(searchData);\r\n      })\r\n      .catch((err) => console.log('Server Error', err));\r\n  }, []);\r\n\r\n  return searchData;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}